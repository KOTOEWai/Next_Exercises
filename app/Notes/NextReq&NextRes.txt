NextRequest á€”á€¾á€„á€·á€º NextResponse á€†á€­á€¯á€á€¬ á€˜á€¬á€á€½á€±á€œá€²


á€á€°á€á€­á€¯á€·á€”á€¾á€…á€ºá€á€¯á€…á€œá€¯á€¶á€¸á€Ÿá€¬ Web Standard API (á€¥á€•á€™á€¬- MDN Request á€”á€²á€· MDN Response) á€á€½á€±á€€á€­á€¯ á€¡á€á€¼á€±á€á€¶á€‘á€¬á€¸á€•á€¼á€®á€¸áŠ
Next.js á€¡á€á€½á€€á€º á€œá€­á€¯á€¡á€•á€ºá€á€²á€· Feature á€á€½á€±á€€á€­á€¯ á€‘á€•á€ºá€•á€±á€«á€„á€ºá€¸á€‘á€Šá€·á€ºá€•á€±á€¸á€‘á€¬á€¸á€á€¬ á€–á€¼á€…á€ºá€•á€«á€á€šá€ºá‹

NextRequest á€”á€²á€· NextResponse á€Ÿá€¬

Next.js á€™á€¾á€¬ request / response á€€á€­á€¯ á€‘á€­á€”á€ºá€¸á€á€»á€¯á€•á€ºá€–á€­á€¯á€· á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€á€²á€· API objects á€á€½á€±á€–á€¼á€…á€ºá€•á€«á€á€šá€ºá‹

á€¡á€á€¯á€¶á€¸á€™á€»á€¬á€¸á€á€²á€·á€”á€±á€›á€¬á€á€½á€±á€€á€á€±á€¬á€·

Middleware

Route Handlers (app/api/.../route.ts)


áá‹ NextRequest (á€¡á€á€„á€º á€á€±á€¬á€„á€ºá€¸á€†á€­á€¯á€á€»á€€á€º)
NextRequest á€†á€­á€¯á€á€¬ á€á€¯á€¶á€¸á€…á€½á€²á€á€°á€†á€®á€€á€”á€± á€á€„á€ºá€›á€±á€¬á€€á€ºá€œá€¬á€á€²á€· HTTP Request (á€á€±á€¬á€„á€ºá€¸á€†á€­á€¯á€á€»á€€á€º) á€€á€­á€¯ á€€á€­á€¯á€šá€ºá€…á€¬á€¸á€•á€¼á€¯á€•á€«á€á€šá€ºá‹
áá€„á€ºá€¸á€Ÿá€¬ Standard Request object á€€á€­á€¯ á€¡á€á€¼á€±á€á€¶á€‘á€¬á€¸á€•á€¼á€®á€¸ Next.js á€›á€²á€· Edge Runtime (á€á€­á€¯á€·á€™á€Ÿá€¯á€á€º Node.js) á€™á€¾á€¬
á€¡á€œá€¯á€•á€ºá€œá€¯á€•á€ºá€–á€­á€¯á€·á€¡á€á€½á€€á€º á€‘á€•á€ºá€†á€±á€¬á€„á€ºá€¸ á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€á€½á€± á€•á€«á€á€„á€ºá€•á€«á€á€šá€º

NextRequest á€Ÿá€¬ browser á€€ server á€†á€®á€•á€­á€¯á€·á€œá€¬á€á€²á€· request á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€á€½á€±á€€á€­á€¯ á€€á€­á€¯á€šá€ºá€…á€¬á€¸á€•á€¼á€¯á€á€šá€ºá‹

ğŸ‘‰ á€›á€”á€­á€¯á€„á€ºá€á€²á€·á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€á€½á€±

URL

Headers

Cookies

Search params

Method (GET, POST...)

--------------------------------------------------------------------------------------------------------------------------------

Property (á€‚á€¯á€á€ºá€á€á€¹á€á€­),          á€–á€±á€¬á€ºá€•á€¼á€á€»á€€á€º,                                                   á€”á€™á€°á€”á€¬ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€™á€¾á€¯
url,                    á€œá€€á€ºá€›á€¾á€­ URL á€¡á€•á€¼á€Šá€·á€ºá€¡á€…á€¯á€¶á‹,                                             request.url


nextUrl,              URL á€€á€­á€¯ á€•á€­á€¯á€™á€­á€¯ á€á€½á€²á€á€¼á€™á€ºá€¸á€…á€­á€á€ºá€–á€¼á€¬á€‘á€¬á€¸á€á€²á€· Objectá‹ Routing á€œá€¯á€•á€ºá€–á€­á€¯á€· á€¡á€›á€±á€¸á€€á€¼á€®á€¸á€á€šá€ºá‹,       request.nextUrl.pathname (á€œá€™á€ºá€¸á€€á€¼á€±á€¬á€„á€ºá€¸) pathname, searchParams, hostname á€…á€á€–á€¼á€„á€·á€º á€á€½á€²á€‘á€¬á€¸á€á€šá€ºá‹

headers,              Request Header á€™á€»á€¬á€¸á‹,                                                request.headers.get('accept-language')

cookies,              Request á€™á€¾á€¬ á€•á€«á€œá€¬á€á€²á€· Cookie á€™á€»á€¬á€¸á‹,                                      request.cookies.get('user-token')


geo,                  á€á€¯á€¶á€¸á€…á€½á€²á€á€°á€›á€²á€· á€•á€‘á€á€®á€á€„á€º á€á€Šá€ºá€”á€±á€›á€¬ á€¡á€á€»á€€á€ºá€¡á€œá€€á€º (Proxy á€™á€¾á€¬á€á€¬ á€›á€”á€­á€¯á€„á€º)á‹,             request.geo.country

ip,                   á€á€¯á€¶á€¸á€…á€½á€²á€á€°á€›á€²á€· IP Addressá‹,                                                request.ip

method,               "HTTP Method (á€¥á€•á€™á€¬- GET, POST)á‹",                                   request.method



á‚á‹ NextResponse (á€¡á€‘á€½á€€á€º á€á€¯á€¶á€·á€•á€¼á€”á€ºá€™á€¾á€¯)

NextResponse á€Ÿá€¬ server á€€ browser á€†á€® á€•á€¼á€”á€ºá€•á€­á€¯á€·á€™á€šá€·á€º response á€€á€­á€¯ á€€á€­á€¯á€šá€ºá€…á€¬á€¸á€•á€¼á€¯á€á€šá€ºá‹

NextResponse á€†á€­á€¯á€á€¬ Request á€€á€­á€¯ á€á€¯á€¶á€·á€•á€¼á€”á€ºá€–á€­á€¯á€·á€¡á€á€½á€€á€º HTTP Response (á€á€¯á€¶á€·á€•á€¼á€”á€ºá€™á€¾á€¯) á€á€…á€ºá€á€¯á€€á€­á€¯ á€–á€”á€ºá€á€®á€¸á€–á€­á€¯á€· á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€á€²á€· Class á€–á€¼á€…á€ºá€•á€«á€á€šá€ºá‹
áá€„á€ºá€¸á€Ÿá€¬ Standard Response object á€€á€­á€¯ á€¡á€á€¼á€±á€á€¶á€‘á€¬á€¸á€•á€¼á€®á€¸áŠ Next.js á€›á€²á€· Proxy (Middleware) á€™á€¾á€¬ á€œá€™á€ºá€¸á€€á€¼á€±á€¬á€„á€ºá€¸á€•á€¼á€±á€¬á€„á€ºá€¸á€œá€²á€á€¼á€„á€ºá€¸ (Redirect, Rewrite) á€”á€²á€· 
Header á€™á€»á€¬á€¸ á€•á€¼á€¯á€•á€¼á€„á€ºá€á€¼á€„á€ºá€¸á€á€­á€¯á€·á€¡á€á€½á€€á€º á€¡á€‘á€°á€¸á€’á€®á€‡á€­á€¯á€„á€ºá€¸á€‘á€¯á€á€ºá€‘á€¬á€¸á€á€¬ á€–á€¼á€…á€ºá€•á€«á€á€šá€ºá‹

ğŸ‘‰ á€œá€¯á€•á€ºá€œá€­á€¯á€·á€›á€á€²á€·á€¡á€œá€¯á€•á€ºá€á€½á€±

Response á€•á€¼á€”á€ºá€•á€­á€¯á€·

Redirect

Rewrite

Cookies set / delete

Headers set
-----------------------------------------------------------------------------------------------------------------------------------------

Method (á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€á€»á€€á€º),                                   á€–á€±á€¬á€ºá€•á€¼á€á€»á€€á€º,                                             á€”á€™á€°á€”á€¬ á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€™á€¾á€¯
                                
NextResponse.next(),                  Request á€€á€­á€¯ á€†á€€á€ºá€œá€€á€º á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€–á€­á€¯á€· á€á€½á€„á€·á€ºá€•á€¼á€¯á€•á€¼á€®á€¸ Response Header á€™á€»á€¬á€¸á€€á€­á€¯ á€•á€¼á€¯á€•á€¼á€„á€ºá€”á€­á€¯á€„á€ºá‹,       return NextResponse.next()


NextResponse.rewrite(url),            URL á€€á€­á€¯ á€™á€•á€¼á€±á€¬á€„á€ºá€¸á€œá€²á€˜á€²áŠ Request á€€á€­á€¯ á€á€á€¼á€¬á€¸ á€…á€¬á€™á€»á€€á€ºá€”á€¾á€¬á€†á€® á€•á€­á€¯á€·á€†á€±á€¬á€„á€ºá€•á€±á€¸á€á€¼á€„á€ºá€¸á‹,              return NextResponse.rewrite(newUrl)


NextResponse.redirect(url),           á€á€¯á€¶á€¸á€…á€½á€²á€á€°á€€á€­á€¯ URL á€¡á€á€…á€ºá€á€…á€ºá€á€¯á€†á€® á€œá€™á€ºá€¸á€€á€¼á€±á€¬á€„á€ºá€¸á€•á€¼á€±á€¬á€„á€ºá€¸á€•á€±á€¸á€á€¼á€„á€ºá€¸á‹,                           return NextResponse.redirect(newUrl)

NextResponse.json(data),              JSON Data á€•á€«á€á€²á€· Response á€á€…á€ºá€á€¯á€€á€­á€¯ á€•á€¼á€”á€ºá€•á€±á€¸á€á€¼á€„á€ºá€¸á‹,                                 return NextResponse.json({ message: 'Hello' })

response.headers,                     Response Header á€™á€»á€¬á€¸á€€á€­á€¯ á€•á€¼á€¯á€•á€¼á€„á€ºá€›á€”á€ºá‹                                           "response.headers.set('X-Frame-Options', 'DENY')"

response.cookies,                     Response á€™á€¾á€¬ Cookie á€™á€»á€¬á€¸ á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸/á€–á€»á€€á€ºá€•á€…á€ºá€›á€”á€ºá‹,                                 "response.cookies.set('token', 'abc')"



JSON Response á€•á€¼á€”á€ºá€™á€šá€º
--------------------

import { NextResponse } from "next/server";

export function GET() {
  return NextResponse.json({ message: "Hello World" });
}


Redirect á€œá€¯á€•á€ºá€™á€šá€º
-----------------

export function middleware() {
  return NextResponse.redirect(new URL("/login", request.url));
}


Rewrite (URL á€•á€¼á€±á€¬á€„á€ºá€¸á€™á€•á€¼á€˜á€² route á€•á€¼á€±á€¬á€„á€ºá€¸)
------------------------------------

export function middleware(request: NextRequest) {
  return NextResponse.rewrite(new URL("/home", request.url));
}


Cookie Set á€œá€¯á€•á€ºá€™á€šá€º
-------------------

export function middleware() {
  const response = NextResponse.next();

  response.cookies.set("theme", "dark", {
    httpOnly: true,
    path: "/",
  });
  
  // Cookie Delete á€œá€¯á€•á€ºá€™á€šá€º
  response.cookies.delete("token");


  return response;
}



Middleware + NextRequest / NextResponse á€¡á€œá€¯á€•á€ºá€œá€¯á€•á€ºá€•á€¯á€¶
------------------------------------------------
Browser Request
      â†“
NextRequest (read data)
      â†“
Middleware Logic
      â†“
NextResponse (modify / redirect / continue)
      â†“
Page / API





Route Handlers á€™á€¾á€¬á€œá€Šá€ºá€¸ á€á€¯á€¶á€¸á€”á€­á€¯á€„á€ºá€á€šá€º
-------------------------------
import { NextRequest, NextResponse } from "next/server";

export async function POST(request: NextRequest) {
  const body = await request.json();

  return NextResponse.json({
    success: true,
    data: body,
  });
}
